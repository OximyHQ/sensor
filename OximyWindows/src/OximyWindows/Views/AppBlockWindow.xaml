<Window x:Class="OximyWindows.Views.AppBlockWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="True"
        ResizeMode="NoResize"
        Width="360"
        WindowStartupLocation="CenterScreen">

    <Border Background="{DynamicResource BackgroundBrush}"
            CornerRadius="12"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="6" Opacity="0.3" Direction="270"/>
        </Border.Effect>

        <StackPanel Margin="24,24,24,20">

            <!-- App icon -->
            <Image x:Name="AppIconImage"
                   Width="44" Height="44"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,12"
                   Stretch="UniformToFill"/>

            <!-- App name -->
            <TextBlock x:Name="AppNameText"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,16"/>

            <!-- Mode indicator icon + headline -->
            <StackPanel HorizontalAlignment="Center" Margin="0,0,0,12">
                <TextBlock x:Name="ModeIconText"
                           FontFamily="Segoe MDL2 Assets"
                           FontSize="28"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,6"/>
                <TextBlock x:Name="HeadlineText"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           HorizontalAlignment="Center"
                           TextWrapping="Wrap"
                           TextAlignment="Center"/>
            </StackPanel>

            <!-- Rule message -->
            <TextBlock x:Name="MessageText"
                       FontSize="12"
                       Foreground="{DynamicResource TextSecondaryBrush}"
                       TextWrapping="Wrap"
                       TextAlignment="Center"
                       Margin="0,0,0,16"/>

            <!-- Request-access reason input (collapsed until user clicks Request Access) -->
            <StackPanel x:Name="ReasonPanel" Visibility="Collapsed" Margin="0,0,0,12">
                <TextBlock Text="Reason for access:"
                           FontSize="11"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           Margin="0,0,0,4"/>
                <TextBox x:Name="ReasonBox"
                         FontSize="12"
                         Padding="8"
                         MinHeight="60"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         Background="{DynamicResource SurfaceBrush}"
                         BorderBrush="{DynamicResource BorderBrush}"
                         BorderThickness="1"/>
            </StackPanel>

            <!-- Buttons -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="DismissButton"
                        Grid.Column="0"
                        Content="Dismiss"
                        FontSize="12"
                        Padding="0,8"
                        Style="{DynamicResource SecondaryButtonStyle}"
                        Click="DismissButton_Click"
                        Cursor="Hand"/>

                <Button x:Name="ActionButton"
                        Grid.Column="2"
                        FontSize="12"
                        FontWeight="SemiBold"
                        Padding="0,8"
                        Background="{DynamicResource AccentBrush}"
                        Foreground="White"
                        BorderThickness="0"
                        Click="ActionButton_Click"
                        Cursor="Hand"/>
            </Grid>

        </StackPanel>
    </Border>
</Window>
